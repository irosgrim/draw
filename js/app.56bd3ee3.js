(function(t){function e(e){for(var i,r,n=e[0],h=e[1],c=e[2],d=0,u=[];d<n.length;d++)r=n[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&u.push(a[r][0]),a[r]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);l&&l(e);while(u.length)u.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],i=!0,n=1;n<s.length;n++){var h=s[n];0!==a[h]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=s[0]))}return t}var i={},a={app:0},o=[];function r(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/draw/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],h=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var l=h;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("cd49")},"05b2":function(t,e,s){t.exports=s.p+"img/pan.b30ff77c.svg"},"2bed":function(t,e,s){t.exports=s.p+"img/undo_black_24dp.d12ff827.svg"},"3bba":function(t,e,s){t.exports=s.p+"img/rectangle.4d0ae7e6.svg"},"5c0b":function(t,e,s){"use strict";s("9c0c")},"5d54":function(t,e,s){t.exports=s.p+"img/align_right.86909991.svg"},"5f1c":function(t,e,s){t.exports=s.p+"img/flip_black_24dp.46ff93ea.svg"},"626a":function(t,e,s){t.exports=s.p+"img/layers.cc8677cf.svg"},"67f7":function(t,e,s){var i={"./align_bottom.svg":"76af","./align_horizontal_center_black_24dp.svg":"adfc","./align_left.svg":"cd57","./align_right.svg":"5d54","./align_top.svg":"b989","./align_vertical_center_black_24dp.svg":"977c","./circle.svg":"b289","./flip_black_24dp.svg":"5f1c","./flip_to_back_black_24dp.svg":"c2d2","./flip_to_front_black_24dp.svg":"8065","./horizontal_distribute_black_24dp.svg":"c408","./layers.svg":"626a","./line.svg":"aa4c","./pan.svg":"05b2","./polygon.svg":"baf3","./rectangle.svg":"3bba","./rotate.svg":"f109","./select.svg":"9878","./undo_black_24dp.svg":"2bed","./vertical_distribute_black_24dp.svg":"fa7a","./zoom_in_black_24dp.svg":"b277","./zoom_out_black_24dp.svg":"8904"};function a(t){var e=o(t);return s(e)}function o(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=o,t.exports=a,a.id="67f7"},"76af":function(t,e,s){t.exports=s.p+"img/align_bottom.20299467.svg"},8065:function(t,e,s){t.exports=s.p+"img/flip_to_front_black_24dp.9de9ce0b.svg"},8904:function(t,e,s){t.exports=s.p+"img/zoom_out_black_24dp.4067ef4d.svg"},"977c":function(t,e,s){t.exports=s.p+"img/align_vertical_center_black_24dp.8aae016e.svg"},9878:function(t,e,s){t.exports=s.p+"img/select.d12b8f6e.svg"},"9c0c":function(t,e,s){},aa4c:function(t,e,s){t.exports=s.p+"img/line.8090d386.svg"},adfc:function(t,e,s){t.exports=s.p+"img/align_horizontal_center_black_24dp.7363715e.svg"},b277:function(t,e,s){t.exports=s.p+"img/zoom_in_black_24dp.e03ea257.svg"},b289:function(t,e,s){t.exports=s.p+"img/circle.e191d35f.svg"},b989:function(t,e,s){t.exports=s.p+"img/align_top.e22eae76.svg"},baf3:function(t,e,s){t.exports=s.p+"img/polygon.99afcf4d.svg"},c2d2:function(t,e,s){t.exports=s.p+"img/flip_to_back_black_24dp.1fe11c2b.svg"},c408:function(t,e,s){t.exports=s.p+"img/horizontal_distribute_black_24dp.087eb75f.svg"},cd49:function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("MainMenu"),s("PropertiesMenu",{on:{"export-png":t.exportPNG}}),s("ContextMenu"),s("Canvas",{attrs:{saveCanvas:t.saveCanvas}})],1)},o=[],r=s("d4ec"),n=s("bee2"),h=s("262e"),c=s("2caf"),l=s("9ab4"),d=s("1b40"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"toolbar-container"},[t.storeReady?s("nav",{ref:"toolbar",staticClass:"tb"},[s("ul",{staticClass:"toolbar"},[s("li",[s("button",{ref:"dragBtn",attrs:{type:"button"}},[t._v("...")])]),t._l(t.toolbarStore.tools,(function(e){return s("li",{key:e.label},[s("button",{class:{selected:t.getActiveTool===e.label,disabled:e.disabled},attrs:{type:"button",disabled:e.disabled,title:e.shortcut},on:{click:function(s){return t.$store.commit("toolbar/setActiveTool",e.label)}}},[s("img",{staticClass:"toolbar-icon",attrs:{src:t.getIcon(e.icon),alt:e.label}})])])}))],2)]):t._e(),t.getShapes?s("ul",{staticClass:"tb mt-3 layers",staticStyle:{width:"100px","min-height":"100px","max-height":"500px","overflow-y":"scroll"}},t._l(t.getShapes,(function(e){return s("li",{key:e.id,staticClass:"layer",class:{"selected-layer":e.id===t.selectedShapeId},staticStyle:{padding:"0.5rem"}},[t._v(" "+t._s(e.type)+" ")])})),0):t._e()])},p=[],v=s("4bb5"),f=Object(v["b"])("toolbar"),y=Object(v["b"])("canvas"),g=Object(v["b"])("properties"),b=function(t){Object(h["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(r["a"])(this,i),t=e.apply(this,arguments),t.storeReady=!1,t}return Object(n["a"])(i,[{key:"mounted",value:function(){this.toolbarStore&&(this.storeReady=!0)}},{key:"getIcon",value:function(t){return s("67f7")("./"+t)}}]),i}(d["c"]);Object(l["a"])([Object(v["a"])("toolbar")],b.prototype,"toolbarStore",void 0),Object(l["a"])([f.Getter("getActiveTool")],b.prototype,"getActiveTool",void 0),Object(l["a"])([y.Getter("getShapes")],b.prototype,"getShapes",void 0),Object(l["a"])([g.Getter("getId")],b.prototype,"selectedShapeId",void 0),b=Object(l["a"])([d["a"]],b);var m,w=b,x=w,k=s("2877"),S=Object(k["a"])(x,u,p,!1,null,null,null),C=S.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("canvas",{ref:"canvas",attrs:{id:"canvas",tabindex:"-1"}})},_=[],j=s("b85c"),E=s("2909"),P=s("ade3"),R=s("5530"),M=(s("cb29"),s("4de4"),s("caad"),s("a434"),s("d81d"),s("b64b"),s("99af"),s("159b"),s("7db0"),function(t,e,s,i,a,o,r,n){var h=t-s,c=e-i,l=n/2,d=r/2,u=h-(a+n/2),p=c-(o+r/2);return Math.pow(u,2)/Math.pow(l,2)+Math.pow(p,2)/Math.pow(d,2)<=1}),I=function(t,e,s,i,a,o,r,n,h){var c=T(t,e,a+n/2,o+r/2,1,1,z(h));return c.x>-n/2&&c.x<n/2&&c.y<r/2&&c.y>-r/2},N=function(t,e,s,i,a,o){var r=Math.cos(o),n=Math.sin(o);t.setTransform(r*i,n*i,-n*a,r*a,e,s)},T=function(t,e,s,i,a,o,r){var n=Math.cos(r),h=Math.sin(r),c=n*a*n*o-h*a*-h*o,l=n*o/c,d=-h*a/c,u=h*o/c,p=n*a/c;t-=s,e-=i;var v=t*l+e*u,f=t*d+e*p;return{x:v,y:f}},z=function(t){return Math.PI*t/180},W=s("8a77"),L=function(){function t(e,s,i,a,o,n){Object(r["a"])(this,t),this.position=e,this.coords=s,this.shapeWidth=i,this.shapeHeight=a,this.ctx=o,this.handleSize=9,this.x=0,this.y=0,this.scale=1,this.scale=n,this.createHandle()}return Object(n["a"])(t,[{key:"draw",value:function(t,e){this.x=t,this.y=e,this.ctx.lineWidth=1/this.scale,this.ctx.fillRect(t,e,this.handleSize/this.scale,this.handleSize/this.scale),this.ctx.strokeRect(t,e,this.handleSize/this.scale,this.handleSize/this.scale)}},{key:"createHandle",value:function(){this.ctx.fillStyle="#ffffff",this.ctx.strokeStyle="#00a7f9";var t={x:this.coords.x+this.shapeWidth/2-this.handleSize/2,y:this.coords.y-this.handleSize/2},e={x:this.coords.x+this.shapeWidth/2-this.handleSize/2,y:this.coords.y+this.shapeHeight-this.handleSize/2},s={x:this.coords.x-this.handleSize/2,y:this.coords.y+this.shapeHeight/2-this.handleSize/2},i={x:this.coords.x+this.shapeWidth-this.handleSize/2,y:this.coords.y+this.shapeHeight/2-this.handleSize/2},a={x:this.coords.x-this.handleSize/2,y:this.coords.y-this.handleSize/2},o={x:this.coords.x+this.shapeWidth-this.handleSize/2,y:a.y},r={x:a.x,y:this.coords.y+this.shapeHeight-this.handleSize/2},n={x:o.x,y:r.y};switch(this.position){case"N":this.draw(t.x,t.y);break;case"S":this.draw(e.x,e.y);break;case"W":this.draw(s.x,s.y);break;case"E":this.draw(i.x,i.y);break;case"NW":this.draw(a.x,a.y);break;case"NE":this.draw(o.x,o.y);break;case"SW":this.draw(r.x,r.y);break;case"SE":this.draw(n.x,n.y);break}}},{key:"mouseIsOver",value:function(t,e){var s=t>=this.x-this.shapeWidth/2+20&&t<=this.x+this.shapeWidth/2-20&&e>=this.y-this.handleSize&&e<=this.y+this.handleSize/2,i=t>=this.x-this.shapeWidth/2+20&&t<=this.x+this.shapeWidth/2-20&&e<=this.y+this.handleSize+this.handleSize/2&&e>=this.y,a=t>=this.x-this.handleSize&&t<=this.x+this.handleSize/2&&e>=this.y-this.shapeHeight/2+20&&e<=this.y+this.shapeHeight/2-20,o=t>=this.x&&t<=this.x+this.handleSize+this.handleSize/2&&e>=this.y-this.shapeHeight/2+20&&e<=this.y+this.shapeHeight/2-20,r=t>=this.x-15&&t<=this.x+2.5&&e>=this.y-15&&e<=this.y+2.5,n=t>=this.x&&t<=this.x+15&&e>=this.y-15&&e<=this.y+15,h=t>=this.x&&t<=this.x+15&&e>=this.y-15&&e<=this.y+15,c=t>=this.x-15&&t<=this.x+2.5&&e>=this.y-15&&e<=this.y+15;switch(this.position){case"N":return s;case"S":return i;case"W":return a;case"E":return o;case"NW":return r;case"NE":return n;case"SE":return h;case"SW":return c}}}]),t}(),$=function(){function t(e,s,i,a,o,n){Object(r["a"])(this,t),this.position=e,this.coords=s,this.shapeWidth=i,this.shapeHeight=a,this.ctx=o,this.radius=n,this.handleRadius=5,this.x=0,this.y=0,this.hotSpot=15,this.createHandle()}return Object(n["a"])(t,[{key:"draw",value:function(t,e){this.x=t,this.y=e,this.ctx.lineWidth=1,this.ctx.strokeStyle="#00a7f9",this.ctx.beginPath(),this.ctx.arc(t,e,this.handleRadius,0,2*Math.PI),this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(t,e,this.handleRadius,0,2*Math.PI),this.ctx.stroke()}},{key:"createHandle",value:function(){this.ctx.fillStyle="#ffffff",this.ctx.strokeStyle="#000000";var t={x:this.coords.x+15+this.radius/Math.PI,y:this.coords.y+15+this.radius/Math.PI},e={x:this.coords.x+this.shapeWidth-15-this.radius/Math.PI,y:t.y},s={x:t.x,y:this.coords.y+this.shapeHeight-15-this.radius/Math.PI},i={x:e.x,y:s.y};switch(this.position){case"NW":this.draw(t.x,t.y);break;case"NE":this.draw(e.x,e.y);break;case"SW":this.draw(s.x,s.y);break;case"SE":this.draw(i.x,i.y);break;case"W":break;case"E":break}}},{key:"mouseIsOver",value:function(t,e){var s=t>=this.x-3&&t<=this.x+this.hotSpot&&e>=this.y-3&&e<=this.y+this.hotSpot,i=t>=this.x-this.hotSpot&&t<=this.x+3&&e>=this.y-3&&e<=this.y+this.hotSpot,a=t>=this.x-this.hotSpot&&t<=this.x+3&&e>=this.y-this.hotSpot&&e<=this.y+3,o=t>=this.x-3&&t<=this.x+this.hotSpot&&e>=this.y-this.hotSpot&&e<=this.y+3;switch(this.position){case"NW":return s;case"NE":return i;case"SE":return a;case"SW":return o}return!1}}]),t}(),A=function(){function t(e,s,i){if(Object(r["a"])(this,t),this.id="",this.x=0,this.y=0,this.endX=0,this.endY=0,this.width=0,this.height=0,this.stroke=null,this.fill="",this.type="",this.rotation=0,this.radius=null,this.shadow=null,this._isMoving=!1,this._isSelected=!1,this.radiusHandles=null,this.resizeHandles=[],this.scale=1,this.id=Object(W["a"])(12),"RECTANGLE"===e&&(this.radius=[0,0,0,0]),s.coords)if("LINE"===e)this.x=s.coords.start.x,this.y=s.coords.start.y,this.endX=s.coords.end.x,this.endY=s.coords.end.y;else{var a=s.coords.end.x<=s.coords.start.x,o=s.coords.end.y<=s.coords.start.y;a?(this.x=s.coords.end.x,this.width=Math.abs(s.coords.start.x-s.coords.end.x)):(this.x=s.coords.start.x,this.width=Math.abs(s.coords.end.x-s.coords.start.x)),o?(this.y=s.coords.end.y,this.height=Math.abs(s.coords.start.y-s.coords.end.y)):(this.y=s.coords.start.y,this.height=Math.abs(s.coords.end.y-s.coords.start.y))}i&&(this.x=i.x,this.y=i.y,this.width=i.w,this.height=i.h),this.stroke=s.stroke?s.stroke:null,this.fill=s.fill?s.fill:"",this.type=e}return Object(n["a"])(t,[{key:"roundedRectangle",value:function(t,e,s,i,a,o){t.beginPath(),t.moveTo(e+o[0],s),t.lineTo(e+i-o[1],s),t.quadraticCurveTo(e+i,s,e+i,s+o[1]),t.lineTo(e+i,s+a-o[2]),t.quadraticCurveTo(e+i,s+a,e+i-o[2],s+a),t.lineTo(e+o[3],s+a),t.quadraticCurveTo(e,s+a,e,s+a-o[3]),t.lineTo(e,s+o[0]),t.quadraticCurveTo(e,s,e+o[0],s),t.closePath()}},{key:"applyShadow",value:function(t){t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur,t.shadowOffsetX=this.shadow.x,t.shadowOffsetY=this.shadow.y}},{key:"drawLineResizeHandles",value:function(t){t.setLineDash([]),new L("W",{x:this.x,y:this.y},Math.abs(this.endX-this.x),Math.abs(this.endY-this.y),t,this.scale)}},{key:"drawResizeHandles",value:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setLineDash([]),t.lineWidth=1,t.strokeStyle="#00a7f9",t.strokeRect(-this.width/2,-this.height/2,this.width,this.height);var i=["NW","NE","SW","SE","N","S","W","E"];this.resizeHandles=[],i.forEach((function(i){e.resizeHandles=[].concat(Object(E["a"])(e.resizeHandles),[new L(i,{x:-e.width/2,y:-e.height/2},e.width,e.height,t,s)])}));var a="".concat(this.width," x ").concat(this.height),o=16,r=t.measureText(a).width,n=r+16;t.fillStyle="rgba(0, 166, 249, 0.7)",t.fillRect(-this.width/2+this.width/2-n/2,-this.height/2+this.height+16-o/2,n,o),t.fillStyle="#ffffff",t.textAlign="center",t.font="12px Arial",t.fillText(a,-this.width/2+this.width/2,-this.height/2+this.height+16+o/3.6)}},{key:"drawRadiusHandles",value:function(t){var e=this,s=["NW","NE","SW","SE"];"RECTANGLE"===this.type&&this.width>=50&&this.height>=50&&(this.radiusHandles=[],s.forEach((function(s,i){e.radiusHandles=[].concat(Object(E["a"])(e.radiusHandles),[new $(s,{x:-e.width/2,y:-e.height/2},e.width,e.height,t,e.radius[i])])})))}},{key:"mouseIsOver",value:function(t,e,s){var i=t.clientX-e,a=t.clientY-s;return"CIRCLE"===this.type?M(i,a,e,s,this.x,this.y,this.height,this.width):"RECTANGLE"===this.type?I(i,a,e,s,this.x,this.y,this.height,this.width,this.rotation):"LINE"===this.type?i<this.endX&&i>this.x&&a>this.y-5&&a<this.endY+5:void 0}},{key:"isSelected",get:function(){return this._isSelected},set:function(t){this._isSelected=t}},{key:"isMoving",get:function(){return this._isMoving},set:function(t){this._isMoving=t}},{key:"drawShape",value:function(t){var e=this;if(t.save(),N(t,this.x+this.width/2,this.y+this.height/2,this.scale,this.scale,z(this.rotation)),this.shadow&&this.applyShadow(t),this.radius){var s=this.radius.map((function(t){return e.height/2>t&&e.width/2>t}));null===s||void 0===s||s.forEach((function(t,s){t||(e.radius[s]=e.height/2)}))}switch(this.type){case"RECTANGLE":this.drawRectangle(t);break;case"CIRCLE":this.drawCircle(t);break;case"LINE":this.drawLine(t);break}}},{key:"drawCircle",value:function(t){t.beginPath(),this.fill&&(t.fillStyle=this.fill,t.ellipse(0,0,this.width/2,this.height/2,0,0,2*Math.PI),t.fill()),this.stroke&&(t.setLineDash([]),t.strokeStyle=this.stroke.style,t.lineWidth=this.stroke.width,t.ellipse(-this.width/2,-this.height/2,this.width/2,this.height/2,0,0,2*Math.PI),t.stroke()),this.isSelected&&this.drawResizeHandles(t),t.closePath()}},{key:"drawRectangle",value:function(t){this.fill&&(t.fillStyle=this.fill,this.roundedRectangle(t,-this.width/2,-this.height/2,this.width,this.height,this.radius||[0,0,0,0]),t.fill()),this.fill&&!this.radius&&(t.fillStyle=this.fill,t.fillRect(-this.width/2,-this.height/2,this.width,this.height)),this.stroke&&(t.setLineDash([]),t.strokeStyle=this.stroke.style,t.lineWidth=this.stroke.width,this.roundedRectangle(t,-this.width/2,-this.height/2,this.width,this.height,this.radius||[0,0,0,0]),t.stroke()),this.isSelected&&(this.drawResizeHandles(t,this.scale),this.drawRadiusHandles(t))}},{key:"drawLine",value:function(t){t.beginPath(),t.setLineDash([]),t.strokeStyle="black",t.moveTo(this.x,this.y),t.lineTo(this.endX,this.endY),t.stroke(),t.closePath(),t.restore(),this.isSelected&&this.drawLineResizeHandles(t)}},{key:"mouseIsOverRadiusHandle",value:function(t){var e,s,i=T(t.x,t.y,this.x+this.width/2,this.y+this.height/2,1,1,z(this.rotation));if("RECTANGLE"===this.type)return(null===(e=this.radiusHandles)||void 0===e||null===(s=e.find((function(t){return t.mouseIsOver(i.x,i.y)})))||void 0===s?void 0:s.position)||null}},{key:"mouseIsOverResizeHandle",value:function(t){var e,s=T(t.x,t.y,this.x+this.width/2,this.y+this.height/2,1,1,z(this.rotation));return(null===(e=this.resizeHandles.find((function(t){return t.mouseIsOver(s.x,s.y)})))||void 0===e?void 0:e.position)||null}}]),t}(),Y={lineDash:[5,3],strokeStyle:"black",lineWidth:1,fillStyle:"rgba(255, 191, 203, 0.3)"},H=function(t,e,s,i,a,o){switch(a.setLineDash(Y.lineDash),a.strokeStyle=Y.strokeStyle,a.lineWidth=Y.lineWidth,a.fillStyle=Y.fillStyle,o){case"RECTANGLE":a.beginPath(),a.fillRect(t,e,s-t,i-e),a.strokeRect(t,e,s-t,i-e),a.closePath();break;case"CIRCLE":a.beginPath(),a.ellipse(s-(s-t)/2,i-(i-e)/2,Math.abs((s-t)/2),Math.abs((i-e)/2),0,0,2*Math.PI),a.stroke(),a.closePath();break;case"LINE":a.moveTo(s,i),a.strokeStyle="rgba(255, 191, 255, 0.9)",a.beginPath(),a.lineTo(s,i),a.stroke(),a.closePath();break}},X=Object(v["b"])("properties"),G=Object(v["b"])("toolbar"),D=Object(v["b"])("canvas"),F=function(t){Object(h["a"])(s,t);var e=Object(c["a"])(s);function s(){var t;return Object(r["a"])(this,s),t=e.apply(this,arguments),t.canvas=null,t.ctx=null,t.redrawCanvas=!1,t.mouseIsDown=!1,t.mouseIsDragging=!1,t.offsetX=0,t.offsetY=0,t.startPoint={x:0,y:0},t.endPoint={x:0,y:0},t.mouse={x:0,y:0},t.selectedShapes=[],t.shapes={},t.copyShapes=[],t.activeRadiusModifier=null,t.activeResizeModifier=null,t.scale=1,t.lastX=0,t.lastY=0,t}return Object(n["a"])(s,[{key:"rotationChanged",value:function(t){this.getShapeId&&(this.shapes[this.getShapeId].rotation=t,this.draw())}},{key:"radiusChanged",value:function(t){if(this.getShapeId)if(this.shapes[this.getShapeId].radius||(this.shapes[this.getShapeId].radius=[]),t){var e=t,s=this.shapes[this.getShapeId].radius;s[0]=e.NW,s[1]=e.NE,s[2]=e.SE,s[3]=e.SW}else this.shapes[this.getShapeId].radius=null;this.draw()}},{key:"activeToolChanged",value:function(){this.$store.commit("properties/resetProperties")}},{key:"onShapePropertiesChange",value:function(t){t.id&&(this.shapes[t.id].x=t.x,this.shapes[t.id].y=t.y,this.shapes[t.id].width=t.width,this.shapes[t.id].height=t.height,this.shapes[t.id].fill=t.fill,this.shapes[t.id].stroke=t.stroke,this.draw())}},{key:"shadowUpdated",value:function(t){this.getShapeProperties.id&&(this.shapes[this.getShapeProperties.id].shadow=Object(R["a"])({},t),this.draw())}},{key:"onSaveCanvas",value:function(t){if(t){var e=document.createElement("a");e.download="myCreation.png",e.href=this.canvas.toDataURL("image/png"),e.click(),e.remove,this.$store.commit("properties/saveCanvas")}}},{key:"canvasChangedColorOrOpacity",value:function(t){this.draw()}},{key:"mounted",value:function(){this.setupCanvas()}},{key:"setupCanvas",value:function(){window.addEventListener("resize",this.onResize),this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.setCanvasSize();var t=this.canvas.getBoundingClientRect();this.offsetX=t.left,this.offsetY=t.top,this.update(),this.attachMouseEvents(),this.canvas.addEventListener("keydown",this.onKeyDown),this.canvas.addEventListener("keyup",this.onKeyUp),this.canvas.addEventListener("contextmenu",this.showContextMenu),this.canvas.addEventListener("wheel",this.onZoom)}},{key:"onZoom",value:function(t){for(var e in t.preventDefault(),this.scale+=-.001*t.deltaY,this.scale=Math.min(Math.max(.123,this.scale),25),this.shapes){var s=this.shapes[e];s.scale=this.scale}this.draw()}},{key:"mouseDown",value:function(t){var e=this;if(t.preventDefault(),this.$refs.canvas.focus(),this.mouse.x=t.clientX-this.offsetX,this.mouse.y=t.clientY-this.offsetY,this.mouseIsDown=!0,this.$set(this.startPoint,"x",this.mouse.x),this.$set(this.startPoint,"y",this.mouse.y),this.activeResizeModifier&&(this.mouseIsDragging=!0),this.activeRadiusModifier&&(this.mouseIsDragging=!0),"SELECT"!==this.getActiveTool){var s=function(t){var s=e.shapes[t];s.isSelected=!1,e.selectedShapes=e.selectedShapes.filter((function(t){return t!==s.id}))};for(var i in this.shapes)s(i)}else for(var a in this.selectedShapes=[],this.$store.commit("properties/resetProperties"),this.shapes){var o=this.shapes[a],r=o.mouseIsOver(t,this.offsetX,this.offsetY);if(r||this.activeResizeModifier&&o.isSelected){var n,h,c,l;o.isSelected=!0,-1===this.selectedShapes.indexOf(o.id)&&(this.selectedShapes=[o.id]);var d={id:o.id,x:o.x,y:o.y,width:o.width,height:o.height,fill:o.fill,stroke:o.stroke,shadowColor:null===(n=o.shadow)||void 0===n?void 0:n.color,shadowBlur:null===(h=o.shadow)||void 0===h?void 0:h.blur,shadowX:null===(c=o.shadow)||void 0===c?void 0:c.x,shadowY:null===(l=o.shadow)||void 0===l?void 0:l.y,rotation:o.rotation,radius:o.radius};this.$store.dispatch("properties/setCurrentShape",d)}else o.isSelected=!1}}},{key:"mouseUp",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.mouseIsDown=!1,this.mouseIsDragging=!1,this.activeResizeModifier=null,this.activeRadiusModifier=null,this.mouse.x=t.clientX-this.offsetX,this.mouse.y=t.clientY-this.offsetY,this.$set(this.endPoint,"x",this.mouse.x),this.$set(this.endPoint,"y",this.mouse.y),["RECTANGLE","CIRCLE","LINE"].includes(this.getActiveTool)){var e=this.getShapeProperties.fill,s=this.getShapeProperties.stroke,i=new A(this.getActiveTool,{coords:{start:Object(R["a"])({},this.startPoint),end:this.mouse},fill:e,stroke:s});this.shapes=Object(R["a"])(Object(P["a"])({},i.id,i),this.shapes),this.$store.commit("canvas/newShape",{id:i.id,shape:i}),this.redrawCanvas=!0}this.resetActiveTool()}},{key:"resetActiveTool",value:function(){"PAN"!==this.getActiveTool&&this.$store.commit("toolbar/setActiveTool","SELECT")}},{key:"mouseMove",value:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.mouse.x=t.clientX-this.offsetX,this.mouse.y=t.clientY-this.offsetY;var s=t.movementX,i=t.movementY;if(this.activeResizeModifier&&this.mouseIsDragging&&this.resize(this.mouse),this.activeRadiusModifier&&this.mouseIsDragging&&this.makeRadius(this.mouse),!this.mouseIsDown&&this.selectedShapes.length&&this.debounce((function(){for(var t in e.shapes){var s,i=e.shapes[t],a=i.width>=50&&i.height>=50&&i.mouseIsOverRadiusHandle(e.mouse),o=i.mouseIsOverResizeHandle(e.mouse);if(i.isSelected&&o?(e.activeResizeModifier=o,e.setResizeMousePointer(o,e.canvas)):(e.activeResizeModifier=null,e.canvas.className=""),i.isSelected&&"RECTANGLE"===i.type&&a)e.activeRadiusModifier=a,null===(s=e.canvas)||void 0===s||s.classList.add("radius-cursor");else e.canvas.classList.remove("radius-cursor"),e.activeRadiusModifier=null}}),10),this.mouseIsDown&&!this.activeRadiusModifier&&!this.activeResizeModifier){if(this.redrawCanvas=!0,"SELECT"===this.getActiveTool){var a=function(t){var a=e.shapes[t];T(e.mouse.x,e.mouse.y,0,0,1,1,z(0));a.isSelected&&"LINE"===a.type&&(a.x+=s,a.y+=i,a.endX+=s,a.endY+=i),a.isSelected&&"LINE"!==a.type&&(e.debounce((function(){e.$store.commit("properties/setX",a.x),e.$store.commit("properties/setY",a.y)}),20),a.x+=s,a.y+=i)};for(var o in this.shapes)a(o)}if("PAN"===this.getActiveTool)return void console.log("panning");["RECTANGLE","CIRCLE","LINE"].includes(this.getActiveTool)&&(this.ctx.setTransform(1,0,0,1,0,0),H(this.startPoint.x,this.startPoint.y,this.mouse.x,this.mouse.y,this.ctx,this.getActiveTool))}}},{key:"setResizeMousePointer",value:function(t,e){switch(t){case"N":case"S":e.classList.add("resize-NS");break;case"W":case"E":e.classList.add("resize-WE");break;case"NW":e.classList.add("resize-NW");break;case"NE":e.classList.add("resize-NE");break;case"SE":e.classList.add("resize-SE");break;case"SW":e.classList.add("resize-SW");break}}},{key:"makeRadius",value:function(t){this.activeResizeModifier=null;var e=0;e="NW"===this.activeRadiusModifier||"SW"===this.activeRadiusModifier?t.x-this.startPoint.x:this.startPoint.x-t.x,e>0&&e<=this.shapes[this.getShapeId].width/2&&e<=this.shapes[this.getShapeId].height/2&&this.$store.dispatch("properties/setCurrentShape",{radius:[e,e,e,e]})}},{key:"resize",value:function(t){this.activeRadiusModifier=null;var e=this.getX,s=this.getY,i=0,a=0,o=0,r=0;"N"===this.activeResizeModifier&&(a=t.y,r=this.getHeight+s-t.y>0?this.getHeight+s-t.y:Math.abs(this.getHeight+s-t.y),this.$store.dispatch("properties/setCurrentShape",{y:a,height:r})),"S"===this.activeResizeModifier&&(r=t.y-s>0?t.y-s:Math.abs(t.y-s),this.$store.dispatch("properties/setCurrentShape",{height:r})),"W"===this.activeResizeModifier&&(i=t.x,o=this.getWidth+e-t.x,this.$store.dispatch("properties/setCurrentShape",{x:i,width:o})),"E"===this.activeResizeModifier&&(o=t.x-e>0?t.x-e:Math.abs(t.x-e),this.$store.dispatch("properties/setCurrentShape",{width:o})),"NW"===this.activeResizeModifier&&(i=t.x,a=t.y,o=this.getWidth+e-t.x>0?this.getWidth+e-t.x:Math.abs(this.getWidth+e-t.x),r=this.getHeight+s-t.y>0?this.getHeight+s-t.y:Math.abs(this.getHeight+s-t.y),this.$store.dispatch("properties/setCurrentShape",{x:i,y:a,width:o,height:r})),"NE"===this.activeResizeModifier&&(a=t.y,o=t.x-e>0?t.x-e:1,r=this.getHeight+s-t.y>0?this.getHeight+s-t.y:1,this.$store.dispatch("properties/setCurrentShape",{y:a,width:o,height:r})),"SE"===this.activeResizeModifier&&(o=t.x-e,r=t.y-s>0?t.y-s:1,this.$store.dispatch("properties/setCurrentShape",{width:o,height:r})),"SW"===this.activeResizeModifier&&(i=t.x,o=this.getWidth+e-t.x>0?this.getWidth+e-t.x:1,r=t.y-s>0?t.y-s:1,this.$store.dispatch("properties/setCurrentShape",{x:i,width:o,height:r}))}},{key:"onKeyDown",value:function(t){t.preventDefault();var e=t.shiftKey,s=t.ctrlKey||t.metaKey;"SELECT"===this.getActiveTool&&(t.code.indexOf("Arrow")>-1&&(this.nudgeSelection(t.code,{shift:e,ctrl:s}),this.redrawCanvas=!0),"Backspace"!==t.code&&"Delete"!==t.code||(this.deleteSelection(),this.redrawCanvas=!0))}},{key:"onKeyUp",value:function(t){var e=this;t.preventDefault();var s=t.key.toLowerCase(),i=t.ctrlKey||t.metaKey;if("c"===s&&i&&this.selectedShapes.length&&(this.copyShapes.splice(0),this.copyShapes=Object(E["a"])(this.selectedShapes)),"v"===s&&i){var a,o=Object(j["a"])(this.selectedShapes);try{for(o.s();!(a=o.n()).done;){var r=a.value,n=this.shapes[r];n.isSelected=!1}}catch(h){o.e(h)}finally{o.f()}this.copyShapes.map((function(t){var s=e.shapes[t],i=new A(s.type,{stroke:s.stroke,fill:s.fill},{x:s.x+20,y:s.y+20,w:s.width,h:s.height});i.isSelected=!0,i.radius=s.radius,i.rotation=s.rotation,i.shadow=s.shadow,e.shapes=Object(R["a"])(Object(R["a"])({},e.shapes),{},Object(P["a"])({},i.id,i))})),this.redrawCanvas=!0}switch(s){case"h":this.$store.commit("toolbar/setActiveTool","PAN");break;case"v":this.$store.commit("toolbar/setActiveTool","SELECT");break;case"r":this.$store.commit("toolbar/setActiveTool","RECTANGLE");break;case"o":this.$store.commit("toolbar/setActiveTool","CIRCLE");break;case"l":this.$store.commit("toolbar/setActiveTool","LINE");break}}},{key:"deleteSelection",value:function(){for(var t in this.shapes){var e=this.shapes[t];e.isSelected&&(this.$delete(this.shapes,t),this.$store.commit("properties/resetProperties"))}}},{key:"nudgeSelection",value:function(t,e){var s=e.shift?20:e.ctrl?1:10;for(var i in this.shapes){var a=this.shapes[i];if(a.isSelected)switch(t){case"ArrowRight":a.x+=s,this.$store.commit("properties/setX",a.x);break;case"ArrowLeft":a.x-=s,this.$store.commit("properties/setX",a.x);break;case"ArrowUp":a.y-=s,this.$store.commit("properties/setY",a.y);break;case"ArrowDown":a.y+=s,this.$store.commit("properties/setY",a.y);break}}}},{key:"onResize",value:function(t){this.setCanvasSize(),this.debounce(this.draw,100)}},{key:"debounce",value:function(t,e){clearTimeout(m),m=setTimeout((function(){return t()}),e)}},{key:"setCanvasSize",value:function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}},{key:"draw",value:function(){this.clear();for(var t=Object.keys(this.shapes),e=t.length-1;e>=0;e--){var s=this.shapes[t[e]];s.drawShape(this.ctx)}}},{key:"clear",value:function(){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.fillStyle=this.getCanvas,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}},{key:"showContextMenu",value:function(t){t.preventDefault(),this.$store.commit("toolbar/showContextMenu",{visible:!0,x:t.clientX,y:t.clientY})}},{key:"mouseEvents",value:function(t){switch(t.type){case"mousedown":this.mouseDown(t);break;case"mouseup":this.mouseUp(t);break;case"mousemove":this.mouseMove(t);break}}},{key:"attachMouseEvents",value:function(){var t=this,e=["mousedown","mouseup","mousemove"];e.forEach((function(e){t.canvas.addEventListener(e,t.mouseEvents)}))}},{key:"update",value:function(){this.redrawCanvas&&(console.log("drawing"),this.draw()),this.lastX=this.mouse.x,this.lastY=this.mouse.y,this.redrawCanvas=!1,requestAnimationFrame(this.update)}}]),s}(d["c"]);Object(l["a"])([Object(d["b"])()],F.prototype,"saveCanvas",void 0),Object(l["a"])([Object(v["a"])("toolbar")],F.prototype,"toolbar",void 0),Object(l["a"])([D.Getter("getShapes")],F.prototype,"getShapes",void 0),Object(l["a"])([G.Getter("getActiveTool")],F.prototype,"getActiveTool",void 0),Object(l["a"])([X.Getter("getId")],F.prototype,"getShapeId",void 0),Object(l["a"])([X.Getter("getCanvas")],F.prototype,"getCanvas",void 0),Object(l["a"])([X.Getter("getX")],F.prototype,"getX",void 0),Object(l["a"])([X.Getter("getY")],F.prototype,"getY",void 0),Object(l["a"])([X.Getter("getWidth")],F.prototype,"getWidth",void 0),Object(l["a"])([X.Getter("getHeight")],F.prototype,"getHeight",void 0),Object(l["a"])([X.Getter("getShadow")],F.prototype,"getShadow",void 0),Object(l["a"])([X.Getter("getShapeProperties")],F.prototype,"getShapeProperties",void 0),Object(l["a"])([X.Getter("getSaveCanvas")],F.prototype,"getSaveCanvas",void 0),Object(l["a"])([X.Getter("getRotation")],F.prototype,"getRotation",void 0),Object(l["a"])([X.Getter("getRadius")],F.prototype,"getRadius",void 0),Object(l["a"])([Object(d["d"])("getRotation")],F.prototype,"rotationChanged",null),Object(l["a"])([Object(d["d"])("getRadius")],F.prototype,"radiusChanged",null),Object(l["a"])([Object(d["d"])("getActiveTool")],F.prototype,"activeToolChanged",null),Object(l["a"])([Object(d["d"])("getShapeProperties")],F.prototype,"onShapePropertiesChange",null),Object(l["a"])([Object(d["d"])("getShadow")],F.prototype,"shadowUpdated",null),Object(l["a"])([Object(d["d"])("getSaveCanvas")],F.prototype,"onSaveCanvas",null),Object(l["a"])([Object(d["d"])("getCanvas")],F.prototype,"canvasChangedColorOrOpacity",null),F=Object(l["a"])([d["a"]],F);var B=F,U=B,K=Object(k["a"])(U,O,_,!1,null,null,null),q=K.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.getContextMenu&&t.getContextMenu.visible?s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],staticClass:"context-menu",style:{transform:"translate("+t.getContextMenu.x+"px, "+t.getContextMenu.y+"px)"}},[t._v(" Context menu ")]):t._e()},J=[],Z=Object(v["b"])("toolbar"),Q={visible:!1,x:0,y:0},tt=function(t){Object(h["a"])(s,t);var e=Object(c["a"])(s);function s(){return Object(r["a"])(this,s),e.apply(this,arguments)}return Object(n["a"])(s,[{key:"onClickOutside",value:function(){this.$store.commit("toolbar/showContextMenu",Q)}}]),s}(d["c"]);Object(l["a"])([Z.Getter("getContextMenu")],tt.prototype,"getContextMenu",void 0),tt=Object(l["a"])([d["a"]],tt);var et=tt,st=et,it=Object(k["a"])(st,V,J,!1,null,null,null),at=it.exports,ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"properties-menu"},[t._m(0),t.getId?s("li",{staticClass:"opacity-75 properties-menu-item"},[s("div",{staticClass:"d-flex mb-2"},[s("div",{staticClass:"d-flex align-items-center"},[s("label",{staticClass:"bold",attrs:{for:"X"}},[t._v("X ")]),s("input",{staticClass:"property-input property-input-s",attrs:{type:"number",name:"X",id:"X"},domProps:{value:t.getShapeProperties.x},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateProperty("x",e.target.value)}}})]),s("div",{staticClass:"d-flex align-items-center"},[s("label",{staticClass:"bold",attrs:{for:"Y"}},[t._v("Y ")]),s("input",{staticClass:"property-input property-input-s",attrs:{type:"number",name:"Y",id:"Y"},domProps:{value:t.getShapeProperties.y},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateProperty("y",e.target.value)}}})])]),s("div",{staticClass:"d-flex"},[s("div",{staticClass:"d-flex align-items-center"},[s("label",{staticClass:"bold",attrs:{for:"width"}},[t._v("W ")]),s("input",{staticClass:"property-input property-input-s",attrs:{type:"number",name:"width",id:"width"},domProps:{value:t.getShapeProperties.width},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateProperty("width",e.target.value)}}})]),s("div",{staticClass:"d-flex align-items-center"},[s("label",{staticClass:"bold",attrs:{for:"height"}},[t._v("H ")]),s("input",{staticClass:"property-input property-input-s",attrs:{type:"number",name:"height",id:"height"},domProps:{value:t.getShapeProperties.height},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateProperty("height",e.target.value)}}})])]),s("div",{staticClass:"mt-3"},[s("label",{staticClass:"bold",attrs:{for:"rotation"}},[t._v("Rotation")]),s("input",{staticClass:"property-input property-input-xs",attrs:{type:"number",name:"rotation",id:"rotation"},domProps:{value:t.getShapeProperties.rotation},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateProperty("rotation",e.target.value)}}})]),t.getRadius?s("div",[s("div",{staticClass:"bold"},[t._v("Radius:")]),s("div",{staticClass:"property-container"},[s("div",{staticClass:"w-50"},[s("div",{staticClass:"mb-2 d-flex"},[s("input",{staticClass:"property-input property-input-xs",attrs:{type:"number",name:"radiusNW",id:"radiusNW"},domProps:{value:t.getRadius.NW},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$store.commit("properties/setRadius",{corner:"NW",value:e.target.value})}}}),s("input",{staticClass:"property-input property-input-xs",attrs:{type:"number",name:"radiusNE",id:"radiusNE"},domProps:{value:t.getRadius.NE},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$store.commit("properties/setRadius",{corner:"NE",value:e.target.value})}}})]),s("div",{staticClass:"d-flex"},[s("input",{staticClass:"property-input property-input-xs",attrs:{type:"number",name:"radiusSW",id:"radiusSW"},domProps:{value:t.getRadius.SW},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$store.commit("properties/setRadius",{corner:"SW",value:e.target.value})}}}),s("input",{staticClass:"property-input property-input-xs",attrs:{type:"number",name:"radiusSE",id:"radiusSE"},domProps:{value:t.getRadius.SE},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$store.commit("properties/setRadius",{corner:"SE",value:e.target.value})}}})])])])]):t._e()]):t._e(),t.getId?s("li",{staticClass:"properties-menu-item"},[s("button",{staticClass:"property",attrs:{type:"button"},on:{click:t.toggleFill}},[s("div",{staticClass:"bold"},[t._v("Fill")]),s("div",[t._v(" "+t._s(t.fill.showProperties?"-":"+")+" ")])]),t.getFill?s("div",{staticClass:"property-container"},[s("ColorPicker",{attrs:{color:t.getFill},on:{"color-changed":function(e){return t.updateProperty("fill",e)}}})],1):t._e()]):t._e(),t.getId?s("li",{staticClass:"properties-menu-item"},[s("button",{staticClass:"property",attrs:{type:"button"},on:{click:t.toggleStroke}},[s("div",{staticClass:"bold"},[t._v("Stroke")]),s("div",[t._v(" "+t._s(t.stroke.showProperties&&t.getStroke?"-":"+")+" ")])]),t.stroke.showProperties&&t.getStroke?s("div",{staticClass:"property-container"},[t.getStroke?s("ColorPicker",{attrs:{color:t.getStroke.style},on:{"color-changed":function(e){return t.updateProperty("stroke",{width:2,style:e})}}}):t._e()],1):t._e()]):t._e(),t.getId?s("li",{staticClass:"properties-menu-item"},[s("button",{staticClass:"property",attrs:{type:"button"},on:{click:t.toggleShadow}},[s("div",{staticClass:"bold"},[t._v("Shadow")]),s("div",[t._v(" "+t._s(t.shadow.showProperties?"-":"+")+" ")])]),t.shadow.showProperties&&""!==t.getShadow.color?s("div",{staticClass:"property-container"},[s("div",{staticClass:"d-flex mb-3"},[s("div",[s("div",{staticClass:"d-flex align-items-center mb-2"},[s("label",{attrs:{for:"shadowX"}},[t._v("X ")]),s("input",{staticClass:"property-input property-input-xs",attrs:{type:"number",name:"shadowX",id:"shadowX"},domProps:{value:t.getShapeProperties.shadowX},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateProperty("shadowX",e.target.value)}}})]),s("div",{staticClass:"d-flex align-items-center"},[s("label",{attrs:{for:"shadowY"}},[t._v("Y ")]),s("input",{staticClass:"property-input property-input-xs",attrs:{type:"number",name:"shadowY",id:"shadowY"},domProps:{value:t.getShapeProperties.shadowY},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateProperty("shadowY",e.target.value)}}})])]),s("div",{staticClass:"ml-3"},[s("div",{staticClass:"d-flex align-items-center"},[s("label",{attrs:{for:"blur"}},[t._v("Blur ")]),s("input",{staticClass:"property-input property-input-xs",attrs:{type:"number",name:"blur",id:"blur"},domProps:{value:t.getShapeProperties.shadowBlur},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateProperty("shadowBlur",e.target.value)}}})])])]),t.getShapeProperties.shadowColor?s("ColorPicker",{attrs:{color:t.getShapeProperties.shadowColor},on:{"color-changed":function(e){return t.updateProperty("shadowColor",e)}}}):t._e()],1):t._e()]):t._e(),s("li",{staticClass:"properties-menu-item"},[t._m(1),s("div",{staticClass:"property-container"},[s("ColorPicker",{attrs:{color:t.getCanvas},on:{"color-changed":function(e){return t.handleColorChanged(e,"CANVAS")}}})],1)]),s("li",{staticClass:"properties-menu-item"},[s("button",{staticClass:"property",attrs:{type:"button"},on:{click:function(e){return t.$store.commit("properties/saveCanvas")}}},[s("div",{staticClass:"bold"},[t._v("Export")]),s("div",[t._v(" ... ")])])])])},rt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"properties-menu-item"},[i("div",{staticClass:"bold"},[t._v("Align")]),i("ul",{staticClass:"align-menu disabled"},[i("li",{staticClass:"align-menu-item"},[i("button",[i("img",{attrs:{src:s("cd57"),alt:"align bottom",width:"16",height:"16"}})])]),i("li",{staticClass:"align-menu-item"},[i("button",[i("img",{attrs:{src:s("b989"),alt:"align top",width:"16",height:"16"}})])]),i("li",{staticClass:"align-menu-item"},[i("button",[i("img",{attrs:{src:s("76af"),alt:"align bottom",width:"16",height:"16"}})])]),i("li",{staticClass:"align-menu-item"},[i("button",[i("img",{attrs:{src:s("5d54"),alt:"align bottom",width:"16",height:"16"}})])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"property"},[s("div",{staticClass:"bold"},[t._v("Canvas background")])])}],nt=s("1da1"),ht=(s("96cf"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"colors"},[s("input",{staticClass:"color-picker",attrs:{type:"color"},domProps:{value:t.colorToHex},on:{change:function(e){return t.validateColor(e.target.value)}}}),s("input",{staticClass:"color-code",attrs:{type:"text"},domProps:{value:t.colorToHex},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.validateColor(e.target.value)},blur:function(e){return t.validateColor(e.target.value)}}}),s("input",{staticClass:"property-input property-input-xs",attrs:{type:"number"},domProps:{value:t.formattedOpacity},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.validateOpacity(e.target.value)},blur:function(e){return t.validateOpacity(e.target.value)}}})])}),ct=[],lt=(s("d3b7"),s("25f0"),s("ac1f"),s("5319"),s("fb6a"),s("1276"),s("a15b"),s("a9e3"),function(t){if("string"!==typeof t)return!1;var e=t;return!isNaN(e)&&!isNaN(parseFloat(t))}),dt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),a=parseInt(t.slice(5,7),16);return"rgba(".concat(s,", ").concat(i,", ").concat(a,", ").concat(e,")")},ut=function(t){var e=t.replace(/^rgba?\(|\s+|\)$/g,"").split(","),s=Object(E["a"])(e.slice(0,3)).map((function(t){var e=Number(t).toString(16).length<2?"0"+Number(t).toString(16):Number(t).toString(16);return e})).join(""),i="#".concat(s);return{color:i,opacity:100*parseFloat(e[3])}},pt=function(t){Object(h["a"])(s,t);var e=Object(c["a"])(s);function s(){var t;return Object(r["a"])(this,s),t=e.apply(this,arguments),t.hexColor="",t}return Object(n["a"])(s,[{key:"mounted",value:function(){this.hexColor=ut(this.color).color}},{key:"colorToHex",get:function(){return ut(this.color).color}},{key:"formattedOpacity",get:function(){return ut(this.color).opacity.toString()},set:function(t){var e=dt(this.hexColor,parseInt(t)/100);this.$emit("color-changed",e)}},{key:"validateOpacity",value:function(t){var e=this.formattedOpacity.replace(/[^0-9]+/g,"");this.formattedOpacity&&lt(this.formattedOpacity)?lt(e)&&parseInt(e,10)>100||parseInt(e,10)<0?this.formattedOpacity="100":this.formattedOpacity=t:this.formattedOpacity="100"}},{key:"validateColor",value:function(t){var e=/^#[0-9A-F]{6}$/i.test(t);e?this.colorChanged(t):this.$emit("color-changed","rgba(255, 192, 203, 1)")}},{key:"colorChanged",value:function(t){this.hexColor=t;var e=dt(t,ut(this.color).opacity/100);this.$emit("color-changed",e)}}]),s}(d["c"]);Object(l["a"])([Object(d["b"])({default:"rgba(248, 18, 18, 0.452)"})],pt.prototype,"color",void 0),pt=Object(l["a"])([d["a"]],pt);var vt=pt,ft=vt,yt=Object(k["a"])(ft,ht,ct,!1,null,null,null),gt=yt.exports,bt=Object(v["b"])("properties"),mt=function(t){Object(h["a"])(s,t);var e=Object(c["a"])(s);function s(){var t;return Object(r["a"])(this,s),t=e.apply(this,arguments),t.stroke={showProperties:!1},t.fill={showProperties:!1},t.canvas={color:"rgba(255, 255, 255, 1)",showProperties:!0},t.shadow={showProperties:!1},t}return Object(n["a"])(s,[{key:"toggleStroke",value:function(){var t=Object(nt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.stroke.showProperties=!this.stroke.showProperties,!this.stroke.showProperties){t.next=6;break}return t.next=4,this.$store.commit("properties/setDefaultStroke");case 4:t.next=8;break;case 6:return t.next=8,this.$store.commit("properties/removeStroke");case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"toggleFill",value:function(){this.fill.showProperties=!this.fill.showProperties,this.fill.showProperties?this.$store.commit("properties/setFillOpacity",1):this.$store.commit("properties/setFillOpacity",0)}},{key:"toggleShadow",value:function(){this.shadow.showProperties=!this.shadow.showProperties,this.shadow.showProperties?this.$store.commit("properties/setDefaultShadow"):this.$store.commit("properties/removeShadow")}},{key:"handleColorChanged",value:function(t,e){switch(e){case"CANVAS":this.canvas.color=t,this.$store.commit("properties/setCanvas",t);break}}},{key:"updateProperty",value:function(t,e){this.$store.dispatch("properties/setCurrentShape",Object(P["a"])({},t,e))}}]),s}(d["c"]);Object(l["a"])([Object(v["a"])("properties")],mt.prototype,"properties",void 0),Object(l["a"])([bt.Getter("getShapeProperties")],mt.prototype,"getShapeProperties",void 0),Object(l["a"])([bt.Getter("getId")],mt.prototype,"getId",void 0),Object(l["a"])([bt.Getter("getX")],mt.prototype,"getX",void 0),Object(l["a"])([bt.Getter("getY")],mt.prototype,"getY",void 0),Object(l["a"])([bt.Getter("getWidth")],mt.prototype,"getWidth",void 0),Object(l["a"])([bt.Getter("getHeight")],mt.prototype,"getHeight",void 0),Object(l["a"])([bt.Getter("getStroke")],mt.prototype,"getStroke",void 0),Object(l["a"])([bt.Getter("getFill")],mt.prototype,"getFill",void 0),Object(l["a"])([bt.Getter("getCanvas")],mt.prototype,"getCanvas",void 0),Object(l["a"])([bt.Getter("getShadow")],mt.prototype,"getShadow",void 0),Object(l["a"])([bt.Getter("getShadowColor")],mt.prototype,"getShadowColor",void 0),Object(l["a"])([bt.Getter("getRadius")],mt.prototype,"getRadius",void 0),mt=Object(l["a"])([Object(d["a"])({components:{ColorPicker:gt}})],mt);var wt=mt,xt=wt,kt=Object(k["a"])(xt,ot,rt,!1,null,null,null),St=kt.exports,Ct=function(t){Object(h["a"])(s,t);var e=Object(c["a"])(s);function s(){var t;return Object(r["a"])(this,s),t=e.apply(this,arguments),t.saveCanvas=!1,t}return Object(n["a"])(s,[{key:"exportPNG",value:function(){this.saveCanvas=!0}}]),s}(d["c"]);Ct=Object(l["a"])([Object(d["a"])({components:{Canvas:q,MainMenu:C,ContextMenu:at,PropertiesMenu:St}})],Ct);var Ot=Ct,_t=Ot,jt=(s("5c0b"),Object(k["a"])(_t,a,o,!1,null,null,null)),Et=jt.exports,Pt=s("9483");Object(Pt["a"])("".concat("/draw/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var Rt=s("2f62"),Mt=!0,It={id:"",x:0,y:0,width:0,height:0,rotation:0,radius:null,stroke:null,fill:"rgba(149, 160, 178, 1)",shadowX:0,shadowY:0,shadowBlur:0,shadowColor:"",canvas:"rgba(255, 255, 255, 1)"},Nt={width:2,style:"rgba(0, 0, 0, 1)"},Tt={color:"rgba(41, 41, 41, 0.45)",x:10,y:10,blur:20},zt={id:"",x:0,y:0,width:0,height:0,rotation:0,radius:[5,5,5,5],stroke:null,fill:"rgba(255, 192, 203, 1)",shadowX:0,shadowY:0,shadowBlur:0,shadowColor:"",canvas:"rgba(255, 255, 255, 1)",saveCanvas:!1},Wt={getId:function(t){return t.id},getX:function(t){return t.x},getY:function(t){return t.y},getWidth:function(t){return t.width},getHeight:function(t){return t.height},getRotation:function(t){return t.rotation},getRadius:function(t){return t.radius?{NW:t.radius[0],NE:t.radius[1],SE:t.radius[2],SW:t.radius[3]}:null},getStroke:function(t){return t.stroke},getFill:function(t){return t.fill},getCanvas:function(t){return t.canvas},getShadowColor:function(t){return t.shadowColor},getShadow:function(t){return{x:t.shadowX,y:t.shadowY,blur:t.shadowBlur,color:t.shadowColor}},getShapeProperties:function(t){return{id:t.id,x:t.x,y:t.y,width:t.width,height:t.height,stroke:t.stroke,fill:t.fill,shadowX:t.shadowX,shadowY:t.shadowY,shadowBlur:t.shadowBlur,shadowColor:t.shadowColor,rotation:t.rotation}},getSaveCanvas:function(t){return t.saveCanvas}},Lt={updateProperties:function(t,e){t.x=e.x||t.x,t.y=e.y||t.y,t.width=e.width||t.width,t.height=e.height||t.height},updateProperty:function(t,e){"X"===e.property&&(t.x=parseFloat(e.value)),"Y"===e.property&&(t.y=parseFloat(e.value)),"WIDTH"===e.property&&(t.width=parseFloat(e.value)),"HEIGHT"===e.property&&(t.height=parseFloat(e.value))},setDefaultShadow:function(t){t.shadowX=Tt.x,t.shadowY=Tt.y,t.shadowBlur=Tt.blur,t.shadowColor=Tt.color},setDefaultStroke:function(t){t.stroke=Nt},setCurrentShape:function(t,e){t.id=e.id||t.id,t.x=parseInt(e.x,10)||t.x,t.y=parseInt(e.y,10)||t.y,t.width=parseInt(e.width,10)||t.width,t.height=parseInt(e.height,10)||t.height,t.fill=e.fill||t.fill,t.stroke=e.stroke||t.stroke,t.shadowX=parseInt(e.shadowX,10)||t.shadowX,t.shadowY=parseInt(e.shadowY,10)||t.shadowY,t.shadowBlur=parseInt(e.shadowBlur,10)||t.shadowBlur,t.shadowColor=e.shadowColor||t.shadowColor,t.rotation=void 0!==e.rotation?parseFloat(e.rotation):t.rotation,t.radius=e.radius||t.radius},setShadow:function(t,e){t[e.property]=e.value},setStroke:function(t,e){t.stroke=e},setFill:function(t,e){t.fill=e},setFillOpacity:function(t,e){var s=ut(t.fill);console.log(dt(s.color,e)),t.fill=dt(s.color,e)},setCanvas:function(t,e){t.canvas=e},removeShadow:function(t){t.shadowBlur=0,t.shadowX=0,t.shadowY=0,t.shadowColor=""},removeStroke:function(t){t.stroke=null},resetProperties:function(t){t.id=It.id,t.x=It.x,t.y=It.y,t.fill=It.fill,t.stroke=It.stroke,t.shadowBlur=It.shadowBlur,t.shadowColor=It.shadowColor,t.shadowX=It.shadowX,t.shadowY=It.shadowY,t.radius=It.radius,t.rotation=It.rotation},setX:function(t,e){t.x=e},setY:function(t,e){t.y=e},setRotation:function(t,e){t.rotation=parseFloat(e)},setRadius:function(t,e){var s=parseInt(e.value,10);if(t.radius)switch(e.corner){case"NW":t.radius.splice(0,1,s);break;case"NE":t.radius.splice(1,1,s);break;case"SE":t.radius.splice(2,1,s);break;case"SW":t.radius.splice(3,1,s);break}},saveCanvas:function(t){t.saveCanvas=!t.saveCanvas}},$t={setSomething:function(t,e){return Object(nt["a"])(regeneratorRuntime.mark((function s(){var i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=t.commit,s.next=3,i("setSomething",e);case 3:case"end":return s.stop()}}),s)})))()},setCurrentShape:function(t,e){return Object(nt["a"])(regeneratorRuntime.mark((function s(){var i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=t.commit,s.next=3,i("setCurrentShape",e);case 3:case"end":return s.stop()}}),s)})))()},setDefaultStroke:function(t){return Object(nt["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,e.next=3,s("setDefaultStroke");case 3:case"end":return e.stop()}}),e)})))()},removeStroke:function(t){return Object(nt["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,e.next=3,s("removeStroke");case 3:case"end":return e.stop()}}),e)})))()}},At={namespaced:Mt,state:zt,getters:Wt,actions:$t,mutations:Lt},Yt=!0,Ht={tools:{SELECT:{label:"SELECT",shortcut:"V",icon:"select.svg",selected:!0,disabled:!1},RECTANGLE:{label:"RECTANGLE",shortcut:"R",icon:"rectangle.svg",selected:!1,disabled:!1},CIRCLE:{label:"CIRCLE",shortcut:"O",icon:"circle.svg",selected:!1,disabled:!1},LINE:{label:"LINE",shortcut:"L",icon:"line.svg",selected:!1,disabled:!1},POLYGON:{label:"POLYGON",shortcut:"",icon:"polygon.svg",selected:!1,disabled:!0},PAN:{label:"PAN",shortcut:"H",icon:"pan.svg",selected:!1,disabled:!0},LAYERS:{label:"LAYERS",shortcut:"",icon:"layers.svg",selected:!1,disabled:!1}},activeTool:"SELECT",contextMenu:{visible:!1,x:0,y:0}},Xt={getActiveTool:function(t){return t.activeTool},getContextMenu:function(t){return t.contextMenu}},Gt={setActiveTool:function(t,e){t.activeTool=e},showContextMenu:function(t,e){t.contextMenu=Object(R["a"])({},e)}},Dt={setSomething:function(t,e){return Object(nt["a"])(regeneratorRuntime.mark((function s(){var i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=t.commit,s.next=3,i("setSomething",e);case 3:case"end":return s.stop()}}),s)})))()}},Ft={namespaced:Yt,state:Ht,getters:Xt,actions:Dt,mutations:Gt},Bt=!0,Ut={shapes:null},Kt={getShapes:function(t){return t.shapes}},qt={newShape:function(t,e){t.shapes||(t.shapes={}),t.shapes=Object(R["a"])(Object(P["a"])({},e.id,e.shape),t.shapes)}},Vt={},Jt={namespaced:Bt,state:Ut,getters:Kt,actions:Vt,mutations:qt};i["a"].use(Rt["a"]);var Zt={state:{version:"0.0.1"},modules:{properties:At,toolbar:Ft,canvas:Jt}},Qt=new Rt["a"].Store(Zt),te=s("c28b"),ee=s.n(te);i["a"].use(ee.a),i["a"].config.productionTip=!1,new i["a"]({store:Qt,render:function(t){return t(Et)}}).$mount("#app")},cd57:function(t,e,s){t.exports=s.p+"img/align_left.982ad324.svg"},f109:function(t,e,s){t.exports=s.p+"img/rotate.bf2d5cfc.svg"},fa7a:function(t,e,s){t.exports=s.p+"img/vertical_distribute_black_24dp.969d9ca4.svg"}});
//# sourceMappingURL=app.56bd3ee3.js.map