(function(e){function t(t){for(var o,a,r=t[0],c=t[1],l=t[2],f=0,h=[];f<r.length;f++)a=r[f],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&h.push(s[a][0]),s[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},s={app:0},i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"3bba":function(e,t,n){e.exports=n.p+"img/rectangle.5cd7aa0a.svg"},"5c0b":function(e,t,n){"use strict";n("9c0c")},9878:function(e,t,n){e.exports=n.p+"img/select.4188c806.svg"},"9c0c":function(e,t,n){},b289:function(e,t,n){e.exports=n.p+"img/circle.bac2ffd3.svg"},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("MainMenu",{on:{"selected-tool":function(t){e.selectedTool=t}}}),n("Canvas",{attrs:{selectedTool:e.selectedTool},on:{"mouse-up":e.resetSelectedTool}})],1)},i=[],a=n("d4ec"),r=n("bee2"),c=n("262e"),l=n("2caf"),u=n("9ab4"),f=n("1b40"),h=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nav",{staticClass:"toolbar-container"},[o("ul",{staticClass:"toolbar"},[o("li",[o("button",{attrs:{type:"button"},on:{click:function(t){return e.$emit("selected-tool","select")}}},[o("img",{staticStyle:{"margin-left":"-0.25rem"},attrs:{src:n("9878"),alt:""}})])]),o("li",[o("button",{attrs:{type:"button"},on:{click:function(t){return e.$emit("selected-tool","rectangle")}}},[o("img",{attrs:{src:n("3bba"),alt:""}})])]),o("li",[o("button",{attrs:{type:"button"},on:{click:function(t){return e.$emit("selected-tool","circle")}}},[o("img",{attrs:{src:n("b289"),alt:""}})])])])])},d=[],v=function(e){Object(c["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return n}(f["c"]);v=Object(u["a"])([f["a"]],v);var p,y=v,g=y,b=n("2877"),w=Object(b["a"])(g,h,d,!1,null,null,null),m=w.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("canvas",{ref:"canvas",attrs:{id:"canvas"}})},O=[],x=n("2909"),j=n("b85c"),S=(n("99af"),n("cb29"),n("d3b7"),n("25f0"),function(e){Object(c["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.apply(this,arguments),e.canvas=null,e.mouseIsDown=!1,e.offsetX=0,e.offsetY=0,e.startPoint={x:0,y:0},e.endPoint={x:0,y:0},e.shapes=[{x:10,y:80,width:80,height:40,stroke:{width:1,style:"black"},fill:null,type:"rectangle",isMoving:!1,isSelected:!1},{x:100,y:80,width:60,height:40,stroke:null,fill:"red",type:"rectangle",isMoving:!1,isSelected:!1},{x:180,y:80,width:60,height:40,stroke:null,fill:"orange",type:"rectangle",isMoving:!1,isSelected:!1},{x:260,y:80,width:60,height:40,stroke:null,fill:"red",type:"rectangle",isMoving:!1,isSelected:!1}],e}return Object(r["a"])(n,[{key:"mounted",value:function(){this.setupCanvas(),window.addEventListener("resize",this.onResize),document.addEventListener("keydown",this.onKeyDown),this.draw()}},{key:"onKeyDown",value:function(e){console.log(e)}},{key:"onResize",value:function(e){this.resizeCanvas(),this.debounce(this.draw,100)}},{key:"debounce",value:function(e,t){clearTimeout(p),p=setTimeout(e,t)}},{key:"resizeCanvas",value:function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}},{key:"setupCanvas",value:function(){this.canvas=this.$refs.canvas,this.resizeCanvas();var e=this.canvas.getBoundingClientRect();this.offsetX=e.left,this.offsetY=e.top,this.canvas.onmousemove=this.mouseMove,this.canvas.onmousedown=this.mouseDown,this.canvas.onmouseup=this.mouseUp,this.canvas.oncontextmenu=this.showContextMenu}},{key:"mouseDown",value:function(e){e.preventDefault();var t=e.clientX-this.offsetX,n=e.clientY-this.offsetY;if(this.mouseIsDown=!0,"select"!==this.selectedTool)this.$set(this.startPoint,"x",t),this.$set(this.startPoint,"y",n);else{var o,s=Object(j["a"])(this.shapes);try{for(s.s();!(o=s.n()).done;){var i=o.value;this.mouseIsOverElement(e,i)?(console.log("here"),i.isMoving=!0,i.isSelected=!0):(console.log("false"),i.isSelected=!1)}}catch(a){s.e(a)}finally{s.f()}this.draw()}}},{key:"mouseUp",value:function(e){e.preventDefault(),e.stopPropagation();var t=e.clientX-this.offsetX,n=e.clientY-this.offsetY;if(this.mouseIsDown=!1,"select"!==this.selectedTool)this.$set(this.endPoint,"x",t),this.$set(this.endPoint,"y",n),"rectangle"===this.selectedTool&&this.drawNewRectangle(),this.draw(),this.$emit("mouse-up");else{var o,s=Object(j["a"])(this.shapes);try{for(s.s();!(o=s.n()).done;){var i=o.value;i.isMoving=!1,i.isSelected=!1}}catch(a){s.e(a)}finally{s.f()}}}},{key:"mouseMove",value:function(e){e.preventDefault(),e.stopPropagation();var t=e.movementX,n=e.movementY;if("select"===this.selectedTool){var o,s=Object(j["a"])(this.shapes);try{for(s.s();!(o=s.n()).done;){var i=o.value;this.mouseIsOverElement(e,i)?i.isSelected=!0:i.isSelected=!1}}catch(l){s.e(l)}finally{s.f()}}if(this.mouseIsDown){var a,r=Object(j["a"])(this.shapes);try{for(r.s();!(a=r.n()).done;){var c=a.value;c.isMoving&&(c.x+=t,c.y+=n)}}catch(l){r.e(l)}finally{r.f()}this.draw()}}},{key:"mouseIsOverElement",value:function(e,t){var n=e.clientX-this.offsetX,o=e.clientY-this.offsetY;return n>t.x&&n<t.x+t.width&&o>t.y&&o<t.y+t.height}},{key:"drawNewRectangle",value:function(){var e={x:this.startPoint.x,y:this.startPoint.y,width:this.endPoint.x-this.startPoint.x,height:this.endPoint.y-this.startPoint.y,stroke:null,fill:"pink",type:"rectangle",isMoving:!1,isSelected:!1};this.shapes=[].concat(Object(x["a"])(this.shapes),[e])}},{key:"draw",value:function(){var e,t=null===(e=this.canvas)||void 0===e?void 0:e.getContext("2d");this.clear();var n,o=Object(j["a"])(this.shapes);try{for(o.s();!(n=o.n()).done;){var s=n.value;s.fill&&(t.fillStyle=s.fill,t.fillRect(s.x,s.y,s.width,s.height)),s.stroke&&(t.strokeStyle=s.stroke.style,t.lineWidth=s.stroke.width,t.strokeRect(s.x,s.y,s.width,s.height)),s.isSelected&&(t.strokeStyle="#22a7f2",t.lineWidth=1,t.strokeRect(s.x,s.y,s.width,s.height)),t.font="10px Arial",t.fillText(s.isSelected.toString(),s.x+s.width,s.y)}}catch(i){o.e(i)}finally{o.f()}}},{key:"clear",value:function(){var e,t=null===(e=this.canvas)||void 0===e?void 0:e.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"showContextMenu",value:function(e){e.preventDefault(),console.log("context menu ",{clientX:e.clientX,clientY:e.clientY})}}]),n}(f["c"]));Object(u["a"])([Object(f["b"])({default:"select"})],S.prototype,"selectedTool",void 0),S=Object(u["a"])([f["a"]],S);var P=S,M=P,T=Object(b["a"])(M,k,O,!1,null,null,null),C=T.exports,$=function(e){Object(c["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.apply(this,arguments),e.selectedTool="select",e}return Object(r["a"])(n,[{key:"resetSelectedTool",value:function(){this.selectedTool="select"}}]),n}(f["c"]);$=Object(u["a"])([Object(f["a"])({components:{Canvas:C,MainMenu:m}})],$);var D=$,_=D,X=(n("5c0b"),Object(b["a"])(_,s,i,!1,null,null,null)),Y=X.exports,E=n("9483");Object(E["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var R=n("2f62");o["a"].use(R["a"]);var I=new R["a"].Store({state:{},mutations:{},actions:{},modules:{}});o["a"].config.productionTip=!1,new o["a"]({store:I,render:function(e){return e(Y)}}).$mount("#app")}});
//# sourceMappingURL=app.0f99dd08.js.map